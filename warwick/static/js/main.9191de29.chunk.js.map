{"version":3,"sources":["settings.js","Components.js","App.js","networking.js","index.js"],"names":["REGION_CODES","EXTRA_LINKS","href","DayJS","IsoWeek","format","number","LocalAreaDataContainer","props","caseNumbers","data","latest_7_days","latestTwoWeeks","msoa_data","sort","x","y","week","slice","map","weekObj","startOfWeek","isoWeek","day","endOfWeek","console","log","range","count","value","className","msoa11_hclnm","PreviousWeeksView","previousWeeks","index","previousWeekCount","weekCount","approximate","change","sign","SourcesAndLinks","link","AddToHomeScreenPrompt","App","state","areas","method","url","done","xhr","XMLHttpRequest","open","onload","response","onerror","send","makeRequest","err","JSON","parse","filter","element","includes","msoa11_cd","e1","e2","setState","Helmet","this","area","React","Component","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.9191de29.chunk.js","sourcesContent":["import React from 'react'\n\n// Used as the website title and header.\nexport const LONG_NAME = \"University of Warwick\"\nexport const SHORT_NAME = \"UoW\"\n\n// A list of the msoa11_cd values for regions in the dataset\n// (e.g. E02000001 for City of London)\nexport const REGION_CODES = [\n  'E02001999', // Campus\n  'E02006523', // Cubbington, Stoneleigh & Radford Semele\n  'E02001993', // Canley and Westwood Heath\n  'E02001986', // Tile Hill\n  'E02006525', // Leamington Central & North\n  'E02006528', // Leamington East\n  'E02006531', // Leamington Brunswick\n  'E02006527', // Leamington West\n  'E02006521', // Kenilworth South\n  'E02001991'  // Earlsdon & Canley Gardens\n]\n\nexport const EXTRA_LINKS = [\n  <li><a href=\"https://testandtrace.warwick.ac.uk/intro/\">Warwick Test and Trace</a></li>,\n  <li>Warwick 24-Hour Helpline: +44 24 7652 3111</li>\n]","import React from 'react'\nimport { EXTRA_LINKS } from './settings.js'\nimport * as DayJS from 'dayjs'\nimport * as IsoWeek from 'dayjs/plugin/isoWeek'\n\nDayJS.extend(IsoWeek)\n\nconst format = (number) => number === -99 ? \"0-2\" : number\n\nexport function LocalAreaDataContainer(props) {\n  const caseNumbers = props.data?.latest_7_days\n  \n  const latestTwoWeeks = props.data?.msoa_data\n    .sort((x, y) => (x.week < y.week))\n    .slice(0, 2)\n    .map(weekObj => {\n      const startOfWeek = DayJS().isoWeek(weekObj.week).day(1)\n      const endOfWeek = startOfWeek.day(7)\n      \n      console.log(weekObj)\n      \n      return {\n        range: `${startOfWeek.format('DD')} – ${endOfWeek.format('DD MMM')}`,\n        count: weekObj.value\n      }\n    })\n  \n  return (\n    <div className='LocalAreaDataContainer'>\n      <h3>{ props.data?.msoa11_hclnm ?? \"\" }</h3>\n      \n      <h1>{ format(caseNumbers) }</h1>\n      <PreviousWeeksView previousWeeks={latestTwoWeeks} />\n    </div>\n  )\n}\n\nfunction PreviousWeeksView(props) {\n  return (\n    <div className=\"PreviousWeeks\">\n      <table>\n      { props.previousWeeks.map((week, index) => {\n        let previousWeekCount = props.previousWeeks[index+1]?.count\n        let weekCount = week.count\n        let approximate = false \n        \n        if (weekCount === -99) {\n          weekCount = 0\n          approximate = true\n        }\n        \n        if (previousWeekCount === -99) {\n          previousWeekCount = 0\n          approximate = true\n        }\n        \n        const change = (previousWeekCount != null) ? weekCount - previousWeekCount : null\n        const sign = (change != null) && (change > 0 ? '+' : (change < 0 ? '' : '±'))\n        \n        return <tr>\n          <td>{week.range}:</td> \n          <td><b>{ format(week.count) }</b></td>\n          { (change != null) && <td>({sign}{change}{approximate && ' [approx.]'})</td> }\n        </tr>\n      })}\n      </table>\n    </div>\n  )\n}\n\nexport function SourcesAndLinks(props) {\n  return (\n    <div className=\"SourcesAndLinks\">\n    <p>\n      Source: <a href=\"https://coronavirus.data.gov.uk/cases\">coronavirus.data.gov.uk/cases</a> – MSOA data <br />\n      (Scroll to \"Cases by local area in England\" - <a href=\"https://www.arcgis.com/apps/webappviewer/index.html?id=47574f7a6e454dc6a42c5f6912ed7076\">direct link</a>)\n    </p>\n    <ul>\n      <li>NHS COVID-19 App: <a href=\"https://apps.apple.com/gb/app/nhs-covid-19/id1520427663\">iOS</a> <a href=\"https://play.google.com/store/apps/details?id=uk.nhs.covid19.production\">Android</a></li>\n      <li><a href=\"https://www.gov.uk/foreign-travel-advice\">Foreign Travel Advice</a></li>\n      { EXTRA_LINKS.map(link => link) }\n      <li><a href=\"https://github.com/uow-covid19/uow-covid19.github.io.dev\">Contribute to this site's development</a></li>\n    </ul>\n    </div>\n  )\n}\n\nexport function AddToHomeScreenPrompt(props) {\n  return (\n    <div className=\"AddToHomeScreenPrompt\">\n      <h3>Add this website to your phone's home screen for quick access:</h3>\n      <p>\n        On iOS: Tap the share button at the bottom of the screen<br />\n        On Android (Chrome): Tap the three dots in the top right of the screen\n      </p>\n    </div>\n  )\n}","import React from 'react';\nimport './App.css';\nimport { LocalAreaDataContainer, SourcesAndLinks, AddToHomeScreenPrompt } from './Components.js'\nimport { makeRequest }  from './networking.js'\nimport { Helmet } from 'react-helmet'\nimport { SHORT_NAME, LONG_NAME, REGION_CODES } from './settings.js'\n\nclass App extends React.Component {\n  constructor(props) {\n    super(props)\n    this.state = { areas: [] } \n  }\n\n  componentDidMount() {\n    makeRequest(\n      'GET', \n      'https://coronavirus.data.gov.uk/downloads/msoa_data/MSOAs_latest.json', \n      (err, data) => {\n        const json = JSON.parse(data)\n        const areas = json.data\n          .filter(element => REGION_CODES.includes(element.msoa11_cd))\n          .sort((e1, e2) => e1.latest_7_days < e2.latest_7_days)\n\n        this.setState(state => ({ areas: areas }))\n      }\n    )\n  }\n\n  render() {\n    return (\n      <div className=\"App\">\n        <Helmet>\n          <title>{SHORT_NAME} COVID Tracker</title>\n        </Helmet>\n        <h1>Unofficial {LONG_NAME} COVID-19 case tracker</h1>\n        <AddToHomeScreenPrompt />\n        <h2>Positive cases for the last 7 days \"where near-complete data is available\"<br />\n        (UK Government figures)</h2>\n        <br />\n        {this.state.areas.map(area => (\n          <LocalAreaDataContainer data={area} />\n        ))}\n        <br />\n        <SourcesAndLinks />\n      </div>\n    )\n  }\n}\n\nexport default App;\n","export function makeRequest (method, url, done) {\n  var xhr = new XMLHttpRequest();\n  xhr.open(method, url);\n  xhr.onload = function () {\n    done(null, xhr.response);\n  };\n  xhr.onerror = function () {\n    done(xhr.response);\n  };\n  xhr.send();\n}","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n"],"sourceRoot":""}